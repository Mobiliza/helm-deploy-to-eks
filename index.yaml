# action.yml
name: "Helm Deploy to EKS"
description: "Upgrades helm chart on eks"
inputs:
  eks-cluster-name:
    description: "AWS EKS cluster name"
    required: true
    default: "my-eks-cluster-name"
  eks-cluster-region:
    description: "AWS region of the cluster"
    required: true
  eks-cluster-accesskey:
    description: "AWS_ACCESS_KEY with EKS permissions"
    required: true
  eks-cluster-secretkey:
    description: "AWS_SECRET_KEY with EKS permissions"
    required: true
  helm-release:
    description: "Helm release name"
    required: true
  namespace:
    description: "Kubernetes namespace of installed release"
    required: true
    default: "default"
  set-values:
    description: "Helm chart values to override"
    required: true
runs:
  using: docker
  image: Dockerfile
  args:
    - ${{ inputs.eks-cluster-accesskey }}
    - ${{ inputs.eks-cluster-secretkey }}
    - ${{ inputs.eks-cluster-region }}
    - ${{ inputs.eks-cluster-name }}
    - ${{ inputs.namespace }}
    - ${{ inputs.helm-release }}
    - ${{ inputs.set-values }}